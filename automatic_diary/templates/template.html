<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <title>Automatic Diary Visualization</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="./diary.css" />
    </head>
    <body>
        <div class="table">
            <div class="tr">
                {% for weekday in ('mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun') %}
                <div class="th">{{ weekday }}</div>
                {% endfor %}
            </div>
            {% for week in year %}
            <div class="tr">
                {% for day in week %}
                <div class="td{% if day.today %} today{% endif %}{% if day.even %} even{% endif %}">
                    <div class="cell">
                        <div class="content">
                            <h2 title="{{ day.date.isoformat() }}">{{ day.date.day }}</h2>
                            {% for item in day.items %}
                            <p class="item {{ item.provider }}">
                                <span class="subprovider">{{ item.subprovider }}</span>
                                <span class="text">{{ item.text }}</span>
                            </p>
                            {% endfor %}
                        </div>
                        <div class="date">{{ day.date.strftime('%b %Y') }}</div>
                    </div>
                </div>
                {% endfor %}
                <svg viewBox="-2 0 104 100" xmlns="http://www.w3.org/2000/svg"
                     preserveAspectRatio="none">
                    {% for provider, stat in week.stats.items() %}
                    <line x1="{{ stat.val }}"
                          y1="0"
                          x2="{{ stat.val }}"
                          y2="100"
                          class="line line-{{ provider }}" />
                    {% endfor %}
                </svg>
            </div>
            {% endfor %}
            <div class="tr">
                {% for weekday in ('mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun') %}
                <div class="th">{{ weekday }}</div>
                {% endfor %}
            </div>
        </div>
    </body>
</html>
